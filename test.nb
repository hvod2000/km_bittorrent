(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     10831,        247]
NotebookOptionsPosition[      9694,        220]
NotebookOutlinePosition[     10026,        235]
CellTagsIndexPosition[      9983,        232]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"SetDirectory", "@", 
   RowBox[{"NotebookDirectory", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Import", "[", "\"\<bencode-decode.wls\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Import", "[", "\"\<bencode-encode.wls\>\"", "]"}], ";", 
  RowBox[{"Import", "[", "\"\<randomaccessfile.wls\>\"", "]"}], ";", 
  RowBox[{"Import", "[", "\"\<tracker.wls\>\"", "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.794895002340804*^9, 3.794895018913875*^9}, {
   3.794976255411274*^9, 3.79497626256456*^9}, {3.796282633607025*^9, 
   3.796282655196217*^9}, 3.7962829474457903`*^9},
 CellLabel->"In[71]:=",ExpressionUUID->"310dbbad-6377-4af0-bf70-3523303279b6"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"BencodeDecode", "[", 
  RowBox[{"\"\<d3:agei19e4:name4:Vlade\>\"", ",", " ", "\"\<UTF-8\>\""}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.7949781408983507`*^9, 3.794978195506575*^9}, {
   3.7949783286610727`*^9, 3.79497836197589*^9}, {3.79639271787889*^9, 
   3.796392727534915*^9}, {3.796392803764695*^9, 3.796392820673407*^9}, {
   3.7963928552769413`*^9, 3.796392869503951*^9}, 3.7963929764261837`*^9},
 CellLabel->"In[74]:=",ExpressionUUID->"829a14b1-3db2-4dba-af4c-0a9cd5c65e50"],

Cell[BoxData[
 RowBox[{"\[LeftAssociation]", 
  RowBox[{
   RowBox[{"\<\"age\"\>", "\[Rule]", "19"}], ",", 
   RowBox[{"\<\"name\"\>", "\[Rule]", "\<\"Vlad\"\>"}]}], 
  "\[RightAssociation]"}]], "Output",
 CellChangeTimes->{
  3.796392981076166*^9, {3.7963931088349333`*^9, 3.796393116961969*^9}, 
   3.796393149951314*^9, {3.7963934781782713`*^9, 3.796393485475995*^9}, 
   3.796393518943077*^9, 3.796393675523325*^9, {3.796393914026443*^9, 
   3.796393935746004*^9}, 3.796394305289278*^9, 3.796395397646007*^9, 
   3.796395759768551*^9, 3.796395851812398*^9, 3.796396437143092*^9, 
   3.7963964783233137`*^9, 3.796396547760398*^9, 3.79639660827915*^9, {
   3.7963966432939672`*^9, 3.796396666846796*^9}, 3.796396900307716*^9, {
   3.796397105655077*^9, 3.796397118997517*^9}, {3.796397336140774*^9, 
   3.796397365659596*^9}, 3.796397425295278*^9, {3.7963974621162863`*^9, 
   3.796397477319334*^9}, 3.796397638872799*^9, 3.7963976969506483`*^9, 
   3.7963977945215683`*^9, 3.7963978409880133`*^9, 3.796397916108304*^9},
 CellLabel->"Out[74]=",ExpressionUUID->"aa9b072d-788c-4fda-b34b-0b4230ea25ed"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"BencodeEncode", "@", 
  RowBox[{"\[LeftAssociation]", 
   RowBox[{
    RowBox[{"\"\<name\>\"", "\[Rule]", "\"\<Vlad\>\""}], ",", 
    RowBox[{"\"\<age\>\"", "\[Rule]", "19"}]}], 
   "\[RightAssociation]"}]}]], "Input",
 CellChangeTimes->{{3.79497820300904*^9, 3.794978231812313*^9}, {
  3.7949782749475803`*^9, 3.794978302542823*^9}, {3.796393258952318*^9, 
  3.7963932684427843`*^9}, {3.7963933319544077`*^9, 3.796393340176032*^9}, {
  3.796393483287849*^9, 3.796393483570207*^9}},
 CellLabel->"In[75]:=",ExpressionUUID->"c1ed8207-3483-42a0-922c-c1688955f670"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "100", ",", "52", ",", "58", ",", "110", ",", "97", ",", "109", ",", "101", 
   ",", "52", ",", "58", ",", "86", ",", "108", ",", "97", ",", "100", ",", 
   "51", ",", "58", ",", "97", ",", "103", ",", "101", ",", "105", ",", "49", 
   ",", "57", ",", "101", ",", "101"}], "}"}]], "Output",
 CellChangeTimes->{
  3.796393485561634*^9, 3.79639351900709*^9, 3.796393675604802*^9, {
   3.796393914108859*^9, 3.796393935829068*^9}, 3.796394305373087*^9, 
   3.796395397768793*^9, 3.796395759900301*^9, 3.796395851935315*^9, 
   3.79639643726414*^9, 3.7963964791944733`*^9, 3.796396547898972*^9, 
   3.7963966084228773`*^9, {3.796396643434101*^9, 3.796396667724867*^9}, 
   3.796396900446978*^9, {3.796397105787771*^9, 3.796397119134994*^9}, {
   3.796397336300584*^9, 3.796397365795443*^9}, 3.79639742545332*^9, {
   3.796397462249165*^9, 3.796397477440391*^9}, 3.79639763897506*^9, 
   3.796397697020631*^9, 3.796397794628446*^9, 3.7963978410788803`*^9, 
   3.79639791619492*^9},
 CellLabel->"Out[75]=",ExpressionUUID->"7bc67718-7d2c-420a-b4ee-7603026a1096"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"dt", "=", 
   RowBox[{"BencodeLoad", "[", "\"\<test.torrent\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{" ", 
  RowBox[{"h", "=", 
   RowBox[{"Hash", "[", 
    RowBox[{
     RowBox[{"ByteArray", "@", 
      RowBox[{"BencodeEncode", "[", 
       RowBox[{
       "dt", "\[LeftDoubleBracket]", "\"\<info\>\"", 
        "\[RightDoubleBracket]"}], "]"}]}], ",", "\"\<SHA\>\"", ",", 
     "\"\<ByteArray\>\""}], "]"}]}]}]}], "Input",
 CellChangeTimes->{{3.795097577961895*^9, 3.795097670414543*^9}, {
   3.7950977019124775`*^9, 3.795097910055714*^9}, {3.796392662751878*^9, 
   3.796392664350646*^9}, {3.796393006456972*^9, 3.796393017526149*^9}, {
   3.796393128539915*^9, 3.796393128678549*^9}, 3.7963931651746264`*^9, {
   3.79639386781728*^9, 3.796393871324643*^9}, {3.796394280231071*^9, 
   3.796394284920272*^9}, {3.796394357221867*^9, 3.796394359712349*^9}, {
   3.796394416738718*^9, 3.796394416742132*^9}, {3.7963974989255533`*^9, 
   3.7963975034817953`*^9}, {3.796397578718444*^9, 3.7963975803885403`*^9}, {
   3.7963977910972567`*^9, 3.796397792540639*^9}},
 CellLabel->"In[76]:=",ExpressionUUID->"7257040d-28f0-4a9e-8a5c-1e4fe1f17dc9"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{
   TagBox["ByteArray",
    "SummaryHead"], "[", 
   DynamicModuleBox[{Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
    
    TemplateBox[{PaneSelectorBox[{False -> GridBox[{{
            GridBox[{{
               TagBox["\"20 bytes\"", "SummaryItem"]}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Rows" -> {{Top}}}, AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}], True -> GridBox[{{
            GridBox[{{
               TagBox["\"20 bytes\"", "SummaryItem"]}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Rows" -> {{Top}}}, AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}]}, 
       Dynamic[Typeset`open$$], ImageSize -> Automatic]},
     "SummaryPanel"],
    DynamicModuleValues:>{}], "]"}],
  ByteArray[{26, 251, 152, 154, 79, 143, 126, 67, 25, 196, 92, 158, 112, 18, 
   183, 97, 254, 215, 81, 201}],
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{
  3.796397426052577*^9, {3.796397463846006*^9, 3.7963975051858807`*^9}, 
   3.796397581296918*^9, 3.796397639517456*^9, 3.796397697563315*^9, 
   3.7963977955341043`*^9, 3.796397841606248*^9, 3.7963979167395267`*^9},
 CellLabel->"Out[77]=",ExpressionUUID->"3c6d4698-8800-4e1b-aef1-f027966a2d75"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"t", "=", 
   RowBox[{"TorrentTraker", "[", 
    RowBox[{
     RowBox[{
     "dt", "\[LeftDoubleBracket]", "\"\<announce\>\"", 
      "\[RightDoubleBracket]"}], ",", "h", ",", "123456", ",", "1234"}], 
    "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7950976895410624`*^9, 3.7950977137761574`*^9}, {
  3.7950979166622376`*^9, 3.7950979264086943`*^9}, {3.795097965060526*^9, 
  3.7950979789342337`*^9}, {3.795098067348189*^9, 3.7950980849555035`*^9}},
 CellLabel->"In[78]:=",ExpressionUUID->"cf65ae6a-1ef3-4934-85aa-5ff9eabcc2d6"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"f", "=", 
   RowBox[{"RandomAccessFile", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"NotebookDirectory", "[", "]"}], "<>", "\"\<testfile2\>\""}], 
     ",", " ", "1024"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"f", "@", 
   RowBox[{"write", "[", 
    RowBox[{"1023", ",", " ", 
     RowBox[{"Range", "@", "256"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"f", "@", 
   RowBox[{"close", "[", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.796282677379517*^9, 3.796282691686779*^9}, {
   3.796282723347793*^9, 3.796282803149522*^9}, {3.796282845085703*^9, 
   3.79628285678231*^9}, 3.796282950323984*^9, 3.796283015370141*^9, {
   3.796283063255402*^9, 3.7962830948508673`*^9}},
 CellLabel->"In[79]:=",ExpressionUUID->"f0b1df39-d6d5-4603-890f-6cef8a76395d"]
},
WindowSize->{798, 898},
WindowMargins->{{1, Automatic}, {Automatic, 1}},
FrontEndVersion->"12.0 for Linux x86 (64-bit) (April 8, 2019)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 728, 14, 78, "Input",ExpressionUUID->"310dbbad-6377-4af0-bf70-3523303279b6"],
Cell[CellGroupData[{
Cell[1311, 38, 508, 8, 31, "Input",ExpressionUUID->"829a14b1-3db2-4dba-af4c-0a9cd5c65e50"],
Cell[1822, 48, 1101, 18, 35, "Output",ExpressionUUID->"aa9b072d-788c-4fda-b34b-0b4230ea25ed"]
}, Open  ]],
Cell[CellGroupData[{
Cell[2960, 71, 585, 11, 31, "Input",ExpressionUUID->"c1ed8207-3483-42a0-922c-c1688955f670"],
Cell[3548, 84, 1097, 18, 35, "Output",ExpressionUUID->"7bc67718-7d2c-420a-b4ee-7603026a1096"]
}, Open  ]],
Cell[CellGroupData[{
Cell[4682, 107, 1193, 24, 55, "Input",ExpressionUUID->"7257040d-28f0-4a9e-8a5c-1e4fe1f17dc9"],
Cell[5878, 133, 2388, 48, 52, "Output",ExpressionUUID->"3c6d4698-8800-4e1b-aef1-f027966a2d75"]
}, Open  ]],
Cell[8281, 184, 566, 12, 31, "Input",ExpressionUUID->"cf65ae6a-1ef3-4934-85aa-5ff9eabcc2d6"],
Cell[8850, 198, 840, 20, 111, "Input",ExpressionUUID->"f0b1df39-d6d5-4603-890f-6cef8a76395d"]
}
]
*)

